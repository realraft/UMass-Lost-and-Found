<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Administrator Panel - UMass Lost and Found</title>
    <link rel="stylesheet" href="HomePageSignedIn.css" />
    <script src="../../components/navbar/navbar.js" defer></script>
  </head>

  <body>
    <!-- Navigation Bar will be dynamically inserted here -->
    <div id="navbar-container"></div>

    <!-- Sidebar -->


    <div class="sidebar">
      <div class="sort-by">
        <h3>Sort By</h3>
        <label>
          <input type="radio" id="date-posted" name="sort" value="date-posted" />
          Date Posted
        </label><br />
        <label>
          <input type="radio" id="relevance" name="sort" value="relevance" />
          Relevance
        </label>
      </div>
      <div class="filters"> 
        <h3>Filters</h3>
        <label>
          <input type="checkbox" name="filter" value="location" />
          Location
        </label><br />
        <label>
          <input type="checkbox" name="filter" value="time-date" />
          Time/Date
        </label><br />
        <label>
          <input type="checkbox" name="filter" value="tags" />
          Tags
        </label>
      </div>
    </div>

    <!-- Posts Container -->
    <div
      class="listing-container"
      id="postsContainer"
      style="height: 400px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px;"
    >
      <!-- Dynamically populated posts will appear here -->
    </div>

    <!-- Edit/Delete Modal (Hidden initially) -->
    <div id="overlay" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5);">
      <div id="editDeleteModal" style="background: white; padding: 20px; width: 300px; margin: 100px auto; border-radius: 10px;">
        <h3 id="editDeleteTitle">Edit/Delete Post</h3>
        <label for="editReason">Edit Reason:</label><br>
        <textarea id="editReason" rows="4" style="width: 100%;"></textarea><br>
        <button id="saveChangesButton">Save Changes</button>
        <button id="deleteReportButton">Delete Report</button>
        <button onclick="closeModal()">Close</button>
      </div>
    </div>

    <!-- External Scripts -->
    <script src="../../dynamic_posting/dynamic_posting.js"></script>
    <script src="Administrator.js"></script> <!-- Replaced AdminPanel.js with Administrator.js -->
  </body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Administrator - Reported Posts</title>
    <link rel="stylesheet" href="HomePageSignedIn.css" />
    <script src="../../components/navbar/navbar.js"></script>
    <script src="Administrator.js"></script>


</head>

<body>
    <!-- Page layout container -->
    <div class="page-container">
        <!-- Sidebar for navigation -->
        <div class="sidebar">
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <h1>Reported Posts</h1>
            <!-- Scrollable Container for Reported Posts -->
            <div class="scrollable-container" id="reportedPostsContainer">
                <!-- Dynamically loaded reported posts will appear here -->
                <p>No reported posts yet.</p>
            </div>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div class="overlay" id="overlay"></div>
    <!-- View Report Modal -->
    <div class="modal" id="viewReportModal">
        <span class="close" id="closeModal">&times;</span>
        <h2 id="reportTitle">Reported Post</h2>
        <p id="reportDetails"></p>
        <button id="deleteReport">Delete Post</button>
    </div>

    <style>
        /* Scrollable container styling */
        .scrollable-container {
            max-height: 400px; /* Adjust height as needed */
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #f9f9f9;
        }

        /* Mimic HomePageSignedIn post styling */
        .post-item {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            background-color: #fff;
        }

        .post-item h3 {
            margin: 0 0 5px;
        }

        .post-item p {
            margin: 0;
        }

        .post-item button {
            margin-top: 10px;
        }
    </style>

    <script>
        // Function to dynamically add reported posts to the scrollable container
        function addReportedPost(postId, title, reason) {
            const container = document.getElementById('reportedPostsContainer');

            // Check if "No reported posts yet" message exists and remove it
            const emptyMessage = container.querySelector('p');
            if (emptyMessage) emptyMessage.remove();

            // Create reported post element
            const postItem = document.createElement('div');
            postItem.classList.add('post-item');
            postItem.setAttribute('data-post-id', postId);

            postItem.innerHTML = `
                <h3>${title}</h3>
                <p>Reported for: ${reason}</p>
                <button class="view-button" data-post-id="${postId}">View</button>
                <button class="delete-button" data-post-id="${postId}">Delete</button>
            `;

            container.appendChild(postItem);
        }

        // Function to open the View Report Modal
        function openViewModal(postId) {
            const modal = document.getElementById('viewReportModal');
            const overlay = document.getElementById('overlay');
            const postElement = document.querySelector(`.post-item[data-post-id="${postId}"]`);

            const title = postElement.querySelector('h3').textContent;
            const details = postElement.querySelector('p').textContent;

            document.getElementById('reportTitle').textContent = title;
            document.getElementById('reportDetails').textContent = details;

            modal.dataset.postId = postId; // Store post ID in modal
            modal.style.display = 'block';
            overlay.style.display = 'block';
        }

        // Function to close the modal
        function closeModal() {
            document.getElementById('viewReportModal').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // Attach event listeners using event delegation
        document.getElementById('reportedPostsContainer').addEventListener('click', function (event) {
            if (event.target.classList.contains('view-button')) {
                const postId = event.target.getAttribute('data-post-id');
                openViewModal(postId);
            }

            if (event.target.classList.contains('delete-button')) {
                const postId = event.target.getAttribute('data-post-id');
                const postElement = document.querySelector(`.post-item[data-post-id="${postId}"]`);
                
                postElement.remove(); // Delete post element from DOM
                alert(`Post ID ${postId} has been deleted.`);
            }
        });

        document.getElementById('overlay').addEventListener('click', closeModal);
        document.getElementById('closeModal').addEventListener('click', closeModal);

        // Example: Dynamically adding reported posts (replace with actual data fetching)
        setTimeout(() => {
            addReportedPost(1, "Lost Wallet", "Spam");
            addReportedPost(2, "Found Phone", "Inappropriate Content");
        }, 1000); // Simulating delay for dynamic loading
    </script>
</body>
</html>